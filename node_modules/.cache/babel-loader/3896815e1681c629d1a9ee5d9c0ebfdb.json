{"remainingRequest":"/Users/medo/Downloads/code/ruoyi-cloud-view/ruoyi-ant/node_modules/babel-loader/lib/index.js!/Users/medo/Downloads/code/ruoyi-cloud-view/ruoyi-ant/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/medo/Downloads/code/ruoyi-cloud-view/ruoyi-ant/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/medo/Downloads/code/ruoyi-cloud-view/ruoyi-ant/src/views/activiti/modules/Leave.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/medo/Downloads/code/ruoyi-cloud-view/ruoyi-ant/src/views/activiti/modules/Leave.vue","mtime":1581492640529},{"path":"/Users/medo/Downloads/code/ruoyi-cloud-view/ruoyi-ant/node_modules/cache-loader/dist/cjs.js","mtime":1580791779218},{"path":"/Users/medo/Downloads/code/ruoyi-cloud-view/ruoyi-ant/node_modules/babel-loader/lib/index.js","mtime":1580791766093},{"path":"/Users/medo/Downloads/code/ruoyi-cloud-view/ruoyi-ant/node_modules/cache-loader/dist/cjs.js","mtime":1580791779218},{"path":"/Users/medo/Downloads/code/ruoyi-cloud-view/ruoyi-ant/node_modules/vue-loader/lib/index.js","mtime":1580791779864}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/medo/Downloads/code/ruoyi-cloud-view/ruoyi-ant/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getDictArray } from '@/utils/dict';\nimport { saveLeave } from '@/api/activiti';\nimport pick from 'lodash.pick';\nexport default {\n  name: 'LeaveForm',\n  data: function data() {\n    return {\n      labelCol: {\n        lg: {\n          span: 7\n        },\n        sm: {\n          span: 7\n        }\n      },\n      wrapperCol: {\n        lg: {\n          span: 10\n        },\n        sm: {\n          span: 17\n        }\n      },\n      confirmLoading: false,\n      leaveTypes: [],\n      formData: {},\n      // form\n      form: this.$form.createForm(this)\n    };\n  },\n  created: function () {\n    var _created = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee() {\n      var query;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              query = this.$route.query;\n              this.formData = Object.assign(pick(query, 'key', 'procDefId', 'procName'));\n              _context.next = 4;\n              return getDictArray('act_leave_type');\n\n            case 4:\n              this.leaveTypes = _context.sent;\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function created() {\n      return _created.apply(this, arguments);\n    }\n\n    return created;\n  }(),\n  methods: {\n    onOk: function onOk(v) {\n      if (v[0]) {\n        var startDate = v[0];\n        var endDate = v[1];\n        var duration = endDate.diff(startDate, 'hours', true).toFixed(2);\n        this.form.setFieldsValue({\n          duration: duration\n        });\n        this.formData = Object.assign(this.formData, {\n          startDate: startDate.format('YYYY-MM-DD HH:mm:00'),\n          endDate: endDate.format('YYYY-MM-DD HH:mm:00')\n        });\n      } else {\n        this.form.setFieldsValue({\n          duration: 0\n        });\n        this.formData = Object.assign(this.formData, {\n          startDate: '',\n          endDate: ''\n        });\n      }\n    },\n    validateDuration: function validateDuration(rule, value, callback) {\n      if (value > 0) {\n        callback();\n      } else {\n        callback(new Error('时长必须大于0'));\n      }\n    },\n    // handler\n    handleSubmit: function handleSubmit(e) {\n      var _this = this;\n\n      e.preventDefault();\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          values = Object.assign(values, _this.formData); // eslint-disable-next-line no-console\n\n          console.log('Received values of form: ', values);\n          _this.confirmLoading = true;\n          saveLeave(values).then(function (res) {\n            if (res.code === 0) {\n              _this.$message.success('保存成功');\n\n              _this.$router.push({\n                name: 'businessList'\n              });\n            } else {\n              _this.$message.error(res.msg);\n            }\n          }).catch(function () {\n            _this.$message.error('系统错误，请稍后再试');\n          }).finally(function () {\n            _this.confirmLoading = false;\n          });\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["Leave.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <a-card :body-style=\"{padding: '24px 32px'}\" :bordered=\"false\">\n    <a-form @submit=\"handleSubmit\" :form=\"form\">\n      <a-form-item\n        label=\"请假类型\"\n        :labelCol=\"labelCol\"\n        :wrapperCol=\"wrapperCol\">\n        <a-select placeholder=\"层级\" v-decorator=\"['type', {initialValue:'1',rules: [{ required: true, message: '请选择请假类型' }]}]\">\n          <a-select-option v-for=\"(d, index) in leaveTypes\" :key=\"index\" :value=\"d.dictValue\">{{ d.dictLabel }}</a-select-option>\n        </a-select>\n      </a-form-item>\n      <a-form-item\n        label=\"标题\"\n        :labelCol=\"labelCol\"\n        :wrapperCol=\"wrapperCol\">\n        <a-input\n          v-decorator=\"[\n            'title',\n            {rules: [{ required: true, message: '请输入标题' }]}\n          ]\"\n          placeholder=\"请假标题\" />\n      </a-form-item>\n      <a-form-item\n        label=\"起止日期\"\n        :labelCol=\"labelCol\"\n        :wrapperCol=\"wrapperCol\">\n        <a-range-picker\n          :showTime=\"{ format: 'HH:mm' }\"\n          format=\"YYYY-MM-DD HH:mm\"\n          style=\"width: 100%\"\n          @ok=\"onOk\"\n          v-decorator=\"[\n            'buildTime',\n            {rules: [{ required: true, message: '请选择起止日期' }]}\n          ]\" />\n      </a-form-item>\n      <a-form-item\n        label=\"时长\"\n        :labelCol=\"labelCol\"\n        :wrapperCol=\"wrapperCol\">\n\n        <a-input\n          style=\"width: 150px;\"\n          addonAfter=\"小时\"\n          disabled\n          v-decorator=\"[\n            'duration',\n            {initialValue:0,rules: [\n              { required: true},\n              {validator: validateDuration}\n            ]}\n          ]\"\n        />\n      </a-form-item>\n      <a-form-item\n        label=\"描述\"\n        :labelCol=\"labelCol\"\n        :wrapperCol=\"wrapperCol\">\n        <a-textarea\n          rows=\"4\"\n          placeholder=\"请输入描述\"\n          v-decorator=\"[\n            'description',\n            {rules: [{ required: true, message: '请输入描述' }]}\n          ]\" />\n      </a-form-item>\n      <a-form-item\n        :wrapperCol=\"{ span: 24 }\"\n        style=\"text-align: center\"\n      >\n        <a-button htmlType=\"submit\" type=\"primary\" :loading=\"confirmLoading\">提交</a-button>\n        <router-link :to=\"{name:'businessList'}\"><a-button style=\"margin-left: 8px\">返回</a-button></router-link>\n      </a-form-item>\n    </a-form>\n  </a-card>\n</template>\n\n<script>\nimport { getDictArray } from '@/utils/dict'\nimport { saveLeave } from '@/api/activiti'\nimport pick from 'lodash.pick'\nexport default {\n  name: 'LeaveForm',\n  data () {\n    return {\n      labelCol: {\n        lg: { span: 7 }, sm: { span: 7 }\n      },\n      wrapperCol: {\n        lg: { span: 10 }, sm: { span: 17 }\n      },\n      confirmLoading: false,\n      leaveTypes: [],\n      formData: {},\n      // form\n      form: this.$form.createForm(this)\n\n    }\n  },\n  async created () {\n    const query = this.$route.query\n    this.formData = Object.assign(pick(query, 'key', 'procDefId', 'procName'))\n    this.leaveTypes = await getDictArray('act_leave_type')\n  },\n  methods: {\n    onOk (v) {\n      if (v[0]) {\n        const startDate = v[0]\n        const endDate = v[1]\n        const duration = endDate.diff(startDate, 'hours', true).toFixed(2)\n        this.form.setFieldsValue({ duration: duration })\n        this.formData = Object.assign(this.formData, { startDate: startDate.format('YYYY-MM-DD HH:mm:00'), endDate: endDate.format('YYYY-MM-DD HH:mm:00') })\n      } else {\n        this.form.setFieldsValue({ duration: 0 })\n        this.formData = Object.assign(this.formData, { startDate: '', endDate: '' })\n      }\n    },\n    validateDuration (rule, value, callback) {\n      if (value > 0) {\n        callback()\n      } else {\n        callback(new Error('时长必须大于0'))\n      }\n    },\n    // handler\n    handleSubmit (e) {\n      e.preventDefault()\n      this.form.validateFields((err, values) => {\n        if (!err) {\n          values = Object.assign(values, this.formData)\n          // eslint-disable-next-line no-console\n          console.log('Received values of form: ', values)\n          this.confirmLoading = true\n          saveLeave(values).then(res => {\n            if (res.code === 0) {\n              this.$message.success('保存成功')\n              this.$router.push({ name: 'businessList' })\n            } else {\n              this.$message.error(res.msg)\n            }\n          }).catch(() => {\n            this.$message.error('系统错误，请稍后再试')\n          }).finally(() => {\n            this.confirmLoading = false\n          })\n        }\n      })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/activiti/modules"}]}